---
- name: schedule | cron job for building images
  # Ensure a job that runs at 2 exists.
  cron:
    name: "build images"
    hour: "{{ builder_build_hour }}" # "{{ marina.builder.schedule.build.hour }}"
    minute: "{{ builder_build_minute }}" # "{{ marina.builder.schedule.build.minute }}"
    job: "{{ marina.src }}/scripts/build_docker_images.sh {{ marina.src }}/scripts/docker_images.txt {{ marina.home }}/docker_images"
  tags:
    - marina
    - schedule

- name: schedule | cron job for pushing images
  cron:
    name: "push images"
    hour: "{{ builder_push_hour }}" # "{{ marina.builder.schedule.push.hour }}"
    minute: "{{ builder_push_minute }}" # "{{ marina.builder.schedule.push.minute }}"
    job: "{{ marina.src }}/scripts/push_docker_images.sh {{ marina.src }}/scripts/docker_images.txt {{ marina.registry.user }} {{ marina.registry.pw }} {{ marina.registry.email }} {{ marina.registry.domain }}"
  tags:
    - marina
    - schedule
